<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error Logging Architecture Overview</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #e74c3c;
            padding-left: 15px;
        }
        h3 {
            color: #c0392b;
            margin-top: 25px;
        }
        .summary-box {
            background: #fdf2f2;
            padding: 20px;
            border-radius: 5px;
            border-left: 5px solid #e74c3c;
            margin: 20px 0;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }
        .log-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border-left: 4px solid #e74c3c;
        }
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .benefit-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .benefit-card h4 {
            color: #c0392b;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #dee2e6;
        }
        th {
            background-color: #e74c3c;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .icon-demo {
            font-size: 1.5em;
            margin-right: 10px;
        }
        .log-level {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            color: white;
            font-size: 0.85em;
        }
        .log-debug { background: #6c757d; }
        .log-info { background: #17a2b8; }
        .log-success { background: #28a745; }
        .log-warn { background: #ffc107; color: #212529; }
        .log-error { background: #dc3545; }
        .log-fatal { background: #6f42c1; }
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            font-family: monospace;
            margin: 20px 0;
            border: 1px solid #dee2e6;
        }
        .highlight-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        ul li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Error Logging Architecture Overview</h1>

        <div class="summary-box">
            <h2>Executive Summary</h2>
            <p>A comprehensive, production-ready error logging system built with TypeScript, featuring structured error collection, icon-based classification, flexible context capture, and future API integration capabilities. This system provides complete observability across the React portfolio application.</p>
        </div>

        <h2>Logger Utility Architecture</h2>

        <h3>Core Logger Class Structure</h3>
        <div class="code-block">
class Logger {
  static debug(message: string) {
    console.debug(`üîç: ${message}`);
  }

  static info(message: string) {
    console.info(`‚ÑπÔ∏è: ${message}`);
  }

  static success(message: string) {
    console.log(`‚úÖ: ${message}`);
  }

  static warn(message: string) {
    console.warn(`‚ö†Ô∏è: ${message}`);
  }

  static error(error: GlobalError) {
    console.error(`‚ùå [${error.timestamp}]: ${error.message}`);
  }

  static fatal(error: GlobalError) {
    console.error(`üíÄ FATAL [${error.timestamp}]: ${error.message}`);
  }

  static retry(message: string) {
    console.log(`üîÑ: ${message}`);
  }

  static cleanup(message: string) {
    console.log(`üßπ: ${message}`);
  }

  static preload(message: string) {
    console.log(`‚ö°: ${message}`);
  }

  static animation(message: string) {
    console.log(`üé¨: ${message}`);
  }
}
        </div>

        <h2>Log Level Classifications</h2>

        <div class="benefits-grid">
            <div class="benefit-card">
                <h4><span class="icon-demo">üîç</span>Debug Level</h4>
                <span class="log-level log-debug">DEBUG</span>
                <ul>
                    <li><strong>Purpose:</strong> Development troubleshooting</li>
                    <li><strong>Usage:</strong> Function entry points, data inspection</li>
                    <li><strong>Example:</strong> "useSkillsResource: Fetching skills with Suspense..."</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">‚ÑπÔ∏è</span>Info Level</h4>
                <span class="log-level log-info">INFO</span>
                <ul>
                    <li><strong>Purpose:</strong> General application flow</li>
                    <li><strong>Usage:</strong> System status, configuration changes</li>
                    <li><strong>Example:</strong> "Application initialized successfully"</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">‚úÖ</span>Success Level</h4>
                <span class="log-level log-success">SUCCESS</span>
                <ul>
                    <li><strong>Purpose:</strong> Successful operations</li>
                    <li><strong>Usage:</strong> API responses, data loading completion</li>
                    <li><strong>Example:</strong> "Skills loaded successfully (44 skills)"</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">‚ö†Ô∏è</span>Warning Level</h4>
                <span class="log-level log-warn">WARN</span>
                <ul>
                    <li><strong>Purpose:</strong> Potential issues, fallback scenarios</li>
                    <li><strong>Usage:</strong> Missing data, deprecated features</li>
                    <li><strong>Example:</strong> "GSAP: Container not found, skipping animation"</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">‚ùå</span>Error Level</h4>
                <span class="log-level log-error">ERROR</span>
                <ul>
                    <li><strong>Purpose:</strong> Recoverable errors with structured details</li>
                    <li><strong>Usage:</strong> API failures, validation errors</li>
                    <li><strong>Example:</strong> "Skills Error Boundary caught error"</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">üíÄ</span>Fatal Level</h4>
                <span class="log-level log-fatal">FATAL</span>
                <ul>
                    <li><strong>Purpose:</strong> Critical system failures</li>
                    <li><strong>Usage:</strong> Application crashes, security issues</li>
                    <li><strong>Example:</strong> "Critical dependency failure"</li>
                </ul>
            </div>
        </div>

        <h2>GlobalError Type System</h2>

        <h3>Structured Error Object</h3>
        <div class="code-block">
export type GlobalError = {
  id: string;                    // Unique identifier
  message: string;               // Human-readable error message
  stack: string | "";            // Stack trace information
  details: string;               // Serialized GlobalErrorDetails
  timestamp: string | "";        // ISO timestamp
  url: string | "";              // Current page URL
  userAgent: string | "";        // Browser information
  retryCount: number;            // Number of retry attempts
};

export type GlobalErrorDetails = {
  component?: string;            // React component name
  route?: string;                // Application route
  section?: string;              // Feature section
  errorInfo?: any;               // React Error Boundary info
  originalError?: any;           // Source error object
  [key: string]: any;            // Additional flexible context
};
        </div>

        <h3>Error Helper Functions</h3>
        <div class="code-block">
// Create structured error with flexible details
export const createGlobalError = (
  message: string,
  code: string,
  details: GlobalErrorDetails = {},
  stack?: string,
  retryCount: number = 0
): GlobalError => {
  return {
    id: `${code}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
    message,
    stack: stack || "",
    details: JSON.stringify(details),
    timestamp: new Date().toISOString(),
    url: typeof window !== 'undefined' ? window.location.href : "",
    userAgent: typeof window !== 'undefined' ? window.navigator.userAgent : "",
    retryCount
  };
};

// Helper for creating flexible error details
export const createErrorDetails = (
  partialDetails: Partial<{
    component: string;
    route: string;
    section: string;
    errorInfo: any;
    originalError: any;
  }> & Record<string, any> = {}
): GlobalErrorDetails => {
  return {
    timestamp: new Date().toISOString(),
    ...partialDetails
  };
};
        </div>

        <h2>Error Flow Architecture</h2>

        <div class="flow-diagram">
            <strong>Error Detection</strong><br>
            ‚Üì<br>
            <strong>Error Boundary Catches</strong><br>
            ‚Üì<br>
            <strong>createErrorDetails() - Context Collection</strong><br>
            ‚Üì<br>
            <strong>createGlobalError() - Structured Creation</strong><br>
            ‚Üì<br>
            <strong>Logger.error() - Formatted Output</strong><br>
            ‚Üì<br>
            <strong>Future: API Transmission</strong>
        </div>

        <h2>Implementation Examples</h2>

        <h3>React Error Boundary Integration</h3>
        <div class="code-block">
&lt;ErrorBoundary
  onError={(error, errorInfo) => {
    // Collect all available context
    const errorDetails = createErrorDetails({
      component: "About.SkillsErrorBoundary",
      route: "/about",
      section: "skills-suspense",
      errorInfo,
      originalError: error,
      cacheKey: "skills-data-v1",
      userAgent: navigator.userAgent
    });

    // Create structured error
    const globalError = createGlobalError(
      `Skills Error Boundary caught error: ${error.message}`,
      'BOUNDARY_ERROR',
      errorDetails,
      error.stack
    );
    
    // Log with icon classification
    Logger.error(globalError);
  }}
&gt;
  &lt;Suspense fallback={&lt;LoadingSpinner /&gt;}&gt;
    &lt;SkillsSection /&gt;
  &lt;/Suspense&gt;
&lt;/ErrorBoundary&gt;
        </div>

        <h3>Suspense Hook Error Handling</h3>
        <div class="code-block">
export const useSkillsResource = () => {
  const skills = suspenseCache.get(cacheKey, async () => {
    Logger.debug("useSkillsResource: Fetching skills with Suspense...");

    const response = await resumeService.getSkills(params);

    // Simple validation - errors throw naturally to Error Boundary
    if (!response || typeof response !== 'object') {
      Logger.warn("useSkillsResource: Invalid response structure received");
      throw new Error('Invalid skills response structure');
    }

    // Test for circular references
    JSON.stringify(response);

    const skillCount = response.target?.length || 0;
    Logger.success(`Skills loaded successfully (${skillCount} skills)`);
    
    return response;
  });

  return skills;
};
        </div>

        <h2>Console Output Examples</h2>

        <h3>Successful Operation Flow</h3>
        <div class="log-example">
üîç: useSkillsResource: Fetching skills with Suspense...
‚úÖ: About page: Client-side rendering enabled
üé¨: About page: Initializing GSAP animations
‚úÖ: useSkillsResource: Skills loaded successfully (44 skills)
‚úÖ: SkillsSection: Skills rendered successfully (44)
        </div>

        <h3>Error Scenario Flow</h3>
        <div class="log-example">
üîç: useSkillsResource: Fetching skills with Suspense...
‚ö†Ô∏è: useSkillsResource: Invalid response structure received
‚ùå [2024-11-18T15:30:45.123Z]: Skills Error Boundary caught error: Invalid skills response structure

Error Details:
{
  "component": "About.SkillsErrorBoundary",
  "route": "/about",
  "section": "skills-suspense",
  "cacheKey": "skills-data-v1",
  "originalError": {...}
}
        </div>

        <h3>Cache Management Operations</h3>
        <div class="log-example">
üßπ: Clearing skills cache
üîÑ: Skills Error Boundary: Attempting reset
‚ö°: Preloading skills
        </div>

        <h2>Production Readiness Features</h2>

        <h3>API Integration Architecture</h3>
        <div class="highlight-box">
            <strong>Future Enhancement:</strong> The Logger class is designed for easy API integration. Each log method can be extended to send structured data to monitoring services like Azure Application Insights, Sentry, or custom logging APIs.
        </div>

        <div class="code-block">
// Future API integration example
class Logger {
  static async error(error: GlobalError) {
    // Console logging (current)
    console.error(`‚ùå [${error.timestamp}]: ${error.message}`);
    
    // Future API logging
    if (process.env.NODE_ENV === 'production') {
      await fetch('/api/logs', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          level: 'error',
          ...error,
          details: JSON.parse(error.details)
        })
      });
    }
  }
}
        </div>

        <h2>Context Capture Strategy</h2>

        <table>
            <thead>
                <tr>
                    <th>Context Type</th>
                    <th>Information Captured</th>
                    <th>Usage</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Component Context</strong></td>
                    <td>Component name, props, state</td>
                    <td>Pinpoint UI error location</td>
                </tr>
                <tr>
                    <td><strong>Route Context</strong></td>
                    <td>Current URL, route parameters</td>
                    <td>Understand user navigation path</td>
                </tr>
                <tr>
                    <td><strong>Section Context</strong></td>
                    <td>Feature area, operation type</td>
                    <td>Categorize errors by functionality</td>
                </tr>
                <tr>
                    <td><strong>Technical Context</strong></td>
                    <td>Stack traces, API responses</td>
                    <td>Deep debugging information</td>
                </tr>
                <tr>
                    <td><strong>Browser Context</strong></td>
                    <td>User agent, viewport, capabilities</td>
                    <td>Environment-specific debugging</td>
                </tr>
                <tr>
                    <td><strong>Operational Context</strong></td>
                    <td>Cache keys, retry counts</td>
                    <td>Performance optimization</td>
                </tr>
            </tbody>
        </table>

        <h2>Debugging & Monitoring Benefits</h2>

        <div class="benefits-grid">
            <div class="benefit-card">
                <h4>Development Benefits</h4>
                <ul>
                    <li><strong>Visual Classification:</strong> Icons make log scanning faster</li>
                    <li><strong>Rich Context:</strong> Complete error environment capture</li>
                    <li><strong>Consistent Format:</strong> Predictable log structure</li>
                    <li><strong>Type Safety:</strong> Compile-time error prevention</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4>Production Benefits</h4>
                <ul>
                    <li><strong>Structured Data:</strong> Machine-readable error logs</li>
                    <li><strong>Complete Traceability:</strong> Full error lifecycle tracking</li>
                    <li><strong>Performance Metrics:</strong> Operation timing and success rates</li>
                    <li><strong>User Experience:</strong> Graceful error recovery</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4>Maintenance Benefits</h4>
                <ul>
                    <li><strong>Quick Diagnosis:</strong> Rich context enables faster fixes</li>
                    <li><strong>Pattern Recognition:</strong> Identify recurring issues</li>
                    <li><strong>Impact Assessment:</strong> Understand error severity</li>
                    <li><strong>Proactive Monitoring:</strong> Catch issues before users</li>
                </ul>
            </div>
        </div>

        <h2>Error Recovery Mechanisms</h2>

        <h3>Automatic Recovery</h3>
        <ul>
            <li><strong>Cache Invalidation:</strong> Automatic retry with fresh data</li>
            <li><strong>Fallback States:</strong> Graceful degradation to backup UI</li>
            <li><strong>Retry Logic:</strong> Exponential backoff for transient failures</li>
        </ul>

        <h3>User-Initiated Recovery</h3>
        <ul>
            <li><strong>Manual Retry:</strong> "Try Again" buttons in error boundaries</li>
            <li><strong>Cache Clearing:</strong> User-controlled cache invalidation</li>
            <li><strong>Page Refresh:</strong> Complete state reset option</li>
        </ul>

        <div class="summary-box">
            <p><strong>Conclusion:</strong> This error logging architecture provides comprehensive observability, structured debugging capabilities, and production-ready monitoring foundation. The flexible context system adapts to different error scenarios while maintaining consistent, actionable logging across the entire application.</p>
        </div>
    </div>
</body>
</html>