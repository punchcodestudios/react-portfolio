<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error Logging Architecture Overview</title>
        <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #e74c3c;
            padding-left: 15px;
        }
        h3 {
            color: #c0392b;
            margin-top: 25px;
        }
        .summary-box {
            background: #fdf2f2;
            padding: 20px;
            border-radius: 5px;
            border-left: 5px solid #e74c3c;
            margin: 20px 0;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }
        .log-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border-left: 4px solid #e74c3c;
        }
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .benefit-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .benefit-card h4 {
            color: #c0392b;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #dee2e6;
        }
        th {
            background-color: #e74c3c;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .icon-demo {
            font-size: 1.5em;
            margin-right: 10px;
        }
        .log-level {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            color: white;
            font-size: 0.85em;
        }
        .log-debug { background: #6c757d; }
        .log-info { background: #17a2b8; }
        .log-success { background: #28a745; }
        .log-warn { background: #ffc107; color: #212529; }
        .log-error { background: #dc3545; }
        .log-fatal { background: #6f42c1; }
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            font-family: monospace;
            margin: 20px 0;
            border: 1px solid #dee2e6;
        }
        .highlight-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        ul li {
            margin: 5px 0;
        }
                .new-feature {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .enhancement-badge {
            background: #28a745;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
        }
    </style>

</head>
<body>
    <div class="container">
        <h1>Error Logging Architecture Overview <span class="enhancement-badge">v2.0 Enhanced</span></h1>

        <div class="summary-box">
            <h2>Executive Summary</h2>
            <p>A production-grade, Azure-integrated error logging system featuring comprehensive telemetry, centralized development debugging, SSR-safe browser compatibility, and advanced performance monitoring. This enhanced architecture provides complete observability with professional development tooling across the React portfolio application.</p>
        </div>

        <div class="new-feature">
            <h2>üÜï Major Enhancements in v2.0</h2>
            <ul>
                <li><strong>Azure Application Insights Integration:</strong> Production telemetry with structured metadata</li>
                <li><strong>Development Debug Panel:</strong> Centralized, collapsible debugging interface</li>
                <li><strong>Advanced Performance Tracking:</strong> Navigation timing, feature usage analytics</li>
                <li><strong>SSR-Safe Implementation:</strong> Browser compatibility with proper hydration</li>
                <li><strong>Production Configuration:</strong> Environment-specific logging strategies</li>
            </ul>
        </div>

        <h2>Enhanced LoggerService Architecture</h2>

        <h3>Production-Ready Logger Implementation</h3>
        <div class="code-block">
class LoggerService {
  private isInit: boolean = false;
  private metadata: LoggerMetadata = {};

  // Enhanced initialization with Azure integration
  async initialize(config?: LoggerConfig): Promise<void> {
    this.isInit = true;
    this.metadata = {
      sessionId: this.generateSessionId(),
      userId: config?.userId,
      environment: process.env.NODE_ENV || 'development',
      version: config?.version || '1.0.0'
    };

    // Azure Application Insights initialization
    if (process.env.NODE_ENV === 'production') {
      await this.initializeAzureInsights();
    }
  }

  // Structured logging with metadata
  debug(message: string, error?: any, metadata?: any): void {
    this.log('debug', message, error, metadata);
  }

  info(message: string, error?: any, metadata?: any): void {
    this.log('info', message, error, metadata);
  }

  success(message: string, error?: any, metadata?: any): void {
    this.log('success', message, error, metadata);
  }

  warn(message: string, error?: any, metadata?: any): void {
    this.log('warn', message, error, metadata);
  }

  error(message: string, error?: any, metadata?: any): void {
    this.log('error', message, error, metadata);
  }

  // New: Performance tracking
  performance(operation: string, duration: number, success: boolean, 
             error?: any, metadata?: any): void {
    this.log('performance', `${operation}: ${duration}ms`, error, {
      ...metadata,
      operation,
      duration,
      success,
      performanceCategory: 'timing'
    });
  }

  // New: Feature usage tracking
  async trackFeatureUsage(feature: string, action: string, 
                         metadata?: any): Promise<void> {
    const telemetryData = {
      feature,
      action,
      timestamp: new Date().toISOString(),
      sessionId: this.metadata.sessionId,
      ...metadata
    };

    this.log('feature', `${feature}.${action}`, undefined, telemetryData);

    // Send to Azure Application Insights in production
    if (process.env.NODE_ENV === 'production') {
      await this.sendToAzure('trackEvent', {
        name: `Feature.${feature}.${action}`,
        properties: telemetryData
      });
    }
  }

  // New: Skills-specific tracking
  async trackSkillsLoaded(count: number, cached: boolean, 
                         duration: number, source: string): Promise<void> {
    return this.trackFeatureUsage('Skills', 'loaded', {
      skillCount: count,
      cached,
      loadDuration: duration,
      dataSource: source,
      performanceMetric: true
    });
  }
}

export default new LoggerService();
        </div>

        <h2>üÜï Development Debug Panel Integration</h2>

        <h3>Centralized Debugging Architecture</h3>
        <div class="new-feature">
            <p><strong>New Feature:</strong> The logging system now integrates with a sophisticated Development Debug Panel that provides real-time monitoring and control over all logging activities.</p>
        </div>

        <div class="code-block">
// Development Debug Panel Integration
const DevelopmentDebugPanel = () => {
  const [loggerStatus, setLoggerStatus] = useState('checking');
  
  useEffect(() => {
    // Monitor logger initialization
    const checkLogger = () => {
      setLoggerStatus(loggerService.isInitialized() ? 'ready' : 'loading');
    };
    
    checkLogger();
    const interval = setInterval(checkLogger, 1000);
    return () => clearInterval(interval);
  }, []);

  const handleLoggerAction = (action: string) => {
    loggerService.debug(`Debug Panel: ${action} triggered`, undefined, {
      component: 'DevelopmentDebugPanel',
      debugAction: action,
      userInitiated: true
    });
  };

  return (
    &lt;div className="logger-status-section"&gt;
      &lt;h4&gt;üìä Logger Status&lt;/h4&gt;
      &lt;div className="status-indicator"&gt;
        Service: {loggerStatus === 'ready' ? '‚úÖ Ready' : '‚è≥ Loading'}
      &lt;/div&gt;
      &lt;button onClick={() => handleLoggerAction('status-check')}&gt;
        Check Logger Status
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
        </div>

        <h2>üÜï Enhanced Telemetry & Analytics</h2>

        <div class="benefits-grid">
            <div class="benefit-card">
                <h4><span class="icon-demo">üìä</span>Performance Tracking <span class="enhancement-badge">NEW</span></h4>
                <ul>
                    <li><strong>Navigation Timing:</strong> Route change performance monitoring</li>
                    <li><strong>Data Loading Metrics:</strong> API response time tracking</li>
                    <li><strong>Component Rendering:</strong> Mount/unmount performance</li>
                    <li><strong>Cache Performance:</strong> Hit/miss ratio analytics</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">üë§</span>User Experience Analytics <span class="enhancement-badge">NEW</span></h4>
                <ul>
                    <li><strong>Feature Usage:</strong> Track user interaction patterns</li>
                    <li><strong>Navigation Paths:</strong> User journey analytics</li>
                    <li><strong>Error Recovery:</strong> User retry behavior tracking</li>
                    <li><strong>Device Analytics:</strong> Mobile vs desktop usage</li>
                </ul>
            </div>

            <div class="benefit-card">
                <h4><span class="icon-demo">üîç</span>Advanced Debugging <span class="enhancement-badge">NEW</span></h4>
                <ul>
                    <li><strong>Real-time Monitoring:</strong> Live debug panel with status indicators</li>
                    <li><strong>Interactive Controls:</strong> Manual cache management and testing</li>
                    <li><strong>Context Enrichment:</strong> Enhanced metadata collection</li>
                    <li><strong>Development Tools:</strong> Integrated debugging utilities</li>
                </ul>
            </div>
        </div>

        <h2>üÜï SSR-Safe Browser Compatibility</h2>

        <h3>Hydration-Safe Implementation</h3>
        <div class="new-feature">
            <p><strong>Enhancement:</strong> All logging components now handle Server-Side Rendering properly with safe browser API access and proper hydration patterns.</p>
        </div>

        <div class="code-block">
// SSR-Safe Logger Initialization
const initializeClientSideLogging = () => {
  const [isClient, setIsClient] = useState(false);
  
  useEffect(() => {
    // Safe client detection
    setIsClient(true);
    
    if (typeof window !== 'undefined') {
      // Initialize logger with browser-specific config
      loggerService.initialize({
        userId: 'anonymous',
        sessionId: generateSessionId(),
        environment: process.env.NODE_ENV,
        browserInfo: {
          userAgent: navigator.userAgent,
          viewport: `${window.innerWidth}x${window.innerHeight}`,
          referrer: document.referrer || 'direct'
        }
      });
    }
  }, []);

  // Only provide logging after client hydration
  return isClient ? loggerService : mockLoggerService;
};

// Browser-safe navigation tracking
const trackNavigation = (location: Location) => {
  if (typeof window === 'undefined') return;
  
  const navigationData = {
    pathname: location.pathname,
    search: location.search,
    referrer: document.referrer || 'none',
    timestamp: new Date().toISOString(),
    viewportSize: `${window.innerWidth}x${window.innerHeight}`
  };
  
  loggerService.debug('Navigation event', undefined, navigationData);
};
        </div>

        <h2>üÜï Production Azure Integration</h2>

        <h3>Azure Application Insights Configuration</h3>
        <div class="code-block">
// Production telemetry configuration
const azureConfig = {
  connectionString: process.env.AZURE_INSIGHTS_CONNECTION_STRING,
  enableAutoRouteTracking: true,
  enableCorsCorrelation: true,
  enableRequestHeaderTracking: true,
  enableResponseHeaderTracking: true,
  enableDistributedTracing: true
};

// Enhanced error tracking with Azure
class AzureIntegratedLogger {
  async sendErrorToAzure(error: GlobalError, metadata: any) {
    if (process.env.NODE_ENV !== 'production') return;

    const telemetryData = {
      name: 'ApplicationError',
      properties: {
        errorId: error.id,
        component: metadata.component,
        route: metadata.route,
        section: metadata.section,
        userAgent: error.userAgent,
        timestamp: error.timestamp
      },
      measurements: {
        retryCount: error.retryCount,
        sessionDuration: this.getSessionDuration()
      }
    };

    await applicationInsights.trackException({
      exception: new Error(error.message),
      properties: telemetryData.properties,
      measurements: telemetryData.measurements
    });
  }

  async trackCustomMetric(name: string, value: number, properties?: any) {
    if (process.env.NODE_ENV !== 'production') return;

    await applicationInsights.trackMetric({
      name,
      value,
      properties: {
        sessionId: this.metadata.sessionId,
        component: properties?.component,
        ...properties
      }
    });
  }
}
        </div>

        <h2>üÜï Enhanced Error Recovery Mechanisms</h2>

        <h3>Interactive Debug Controls</h3>
        <div class="new-feature">
            <p><strong>New Feature:</strong> The debug panel provides interactive controls for error testing and recovery, integrated with the logging system.</p>
        </div>

        <div class="code-block">
// Enhanced error recovery with debug integration
const ErrorRecoveryControls = () => {
  const handleForceError = useCallback(() => {
    loggerService.warn('Debug Panel: Force error triggered', undefined, {
      component: 'ErrorRecoveryControls',
      action: 'force-error',
      userInitiated: true,
      testingPurpose: true
    });

    setTimeout(() => {
      throw new Error('üß™ Debug Panel Test Error - Intentional for testing');
    }, 100);
  }, []);

  const handleCacheClear = useCallback(() => {
    loggerService.info('Debug Panel: Cache clear initiated', undefined, {
      component: 'ErrorRecoveryControls',
      action: 'cache-clear',
      cacheType: 'skills',
      userInitiated: true
    });

    clearSkillsCache();
    setTimeout(() => window.location.reload(), 500);
  }, []);

  return (
    &lt;div className="error-recovery-controls"&gt;
      &lt;button onClick={handleForceError}&gt;
        üí• Force Error (Testing)
      &lt;/button&gt;
      &lt;button onClick={handleCacheClear}&gt;
        üóëÔ∏è Clear Cache & Reload
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
        </div>

        <h2>üÜï Advanced Console Output Examples</h2>

        <h3>Enhanced Development Logging Flow</h3>
        <div class="log-example">
# Enhanced initialization flow
üìä LoggerService: Initializing with config
‚úÖ LoggerService: Successfully initialized (development mode)
üß≠ NavigationDebugger: Component mounted - Route: /about
üîç Navbar: Navigation clicked - From: / To: /about (navbar-click)
üìä Feature.Navigation.navbar-link-clicked tracked
üîç useSkillsResource: Fetching skills with Suspense...
‚ö° Performance: SkillsLoad: 234ms (success: true)
‚úÖ useSkillsResource: Skills loaded successfully (44 skills)
üìä Feature.Skills.loaded tracked (cached: false, duration: 234ms)
        </div>

        <h3>Debug Panel Interaction Flow</h3>
        <div class="log-example">
# Debug panel interactions
üîç DevelopmentDebugPanel: Debug Panel initialized
üìä Feature.Navigation.mobile-menu-opened tracked
üîç Debug Panel: Manual cache clear requested
üßπ Clearing skills cache
üìä Feature.SkillsCache.cache-clear tracked
üîÑ Skills Error Boundary: Attempting reset
üîç Debug Panel: Force error triggered (testing: true)
‚ùå [2024-11-20T15:30:45.123Z]: Debug Panel Test Error - Intentional for testing
        </div>

        <h2>üÜï Production Monitoring Dashboard</h2>

        <div class="new-feature">
            <h3>Available Metrics in Azure Application Insights</h3>
            <ul>
                <li><strong>Feature Usage:</strong> Navigation patterns, skill loading, cache operations</li>
                <li><strong>Performance Metrics:</strong> Load times, navigation speed, API response times</li>
                <li><strong>Error Analytics:</strong> Error rates, recovery success, user impact</li>
                <li><strong>User Behavior:</strong> Device types, navigation paths, interaction patterns</li>
                <li><strong>System Health:</strong> Cache performance, loading success rates, component reliability</li>
            </ul>
        </div>

        <h2>üÜï Development vs Production Configuration</h2>

        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Development Mode</th>
                    <th>Production Mode</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Debug Panel</strong></td>
                    <td>‚úÖ Visible & Interactive</td>
                    <td>‚ùå Completely Hidden</td>
                </tr>
                <tr>
                    <td><strong>Console Logging</strong></td>
                    <td>‚úÖ Full Verbose Output</td>
                    <td>‚ö†Ô∏è Errors & Warnings Only</td>
                </tr>
                <tr>
                    <td><strong>Azure Telemetry</strong></td>
                    <td>‚ùå Local Only</td>
                    <td>‚úÖ Full Azure Integration</td>
                </tr>
                <tr>
                    <td><strong>Performance Tracking</strong></td>
                    <td>‚úÖ Detailed Metrics</td>
                    <td>‚úÖ Production Analytics</td>
                </tr>
                <tr>
                    <td><strong>Error Recovery</strong></td>
                    <td>‚úÖ Manual Controls</td>
                    <td>‚úÖ Automated Recovery</td>
                </tr>
            </tbody>
        </table>

        <div class="summary-box">
            <p><strong>Conclusion:</strong> This enhanced error logging architecture represents a significant evolution toward production-grade observability with professional development tooling. The integration of Azure Application Insights, centralized debug controls, SSR-safe implementation, and comprehensive telemetry provides enterprise-level monitoring capabilities while maintaining an exceptional development experience.</p>
        </div>
    </div>
</body>
</html>